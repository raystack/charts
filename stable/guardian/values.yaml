app:
  image:
    repository: odpf/guardian
    pullPolicy: Always
    tag: latest
  container:
    args:
      - server
      - start
    livenessProbe:
      httpGet:
        path: /ping
        port: tcp
    readinessProbe:
      httpGet:
        path: /ping
        port: tcp

  migration:
    enabled: true
    args:
      - server
      - migrate

  service:
    annotations:
      projectcontour.io/upstream-protocol.h2c: tcp

  cron:
    enabled: true
    jobs:
      - name: "fetch_resources"
        schedule: "0 */2 * * *"
        restartPolicy: Never
        command:
          - guardian
        args:
          - job
          - run
          - fetch_resources
      - name: "appeal_expiration_reminder"
        schedule: "0 9 * * *"
        restartPolicy: Never
        command:
          - guardian
        args:
          - job
          - run
          - appeal_expiration_reminder
      - name: "appeal_expiration_revocation"
        schedule: "*/20 * * * *"
        restartPolicy: Never
        command:
          - guardian
        args:
          - job
          - run
          - appeal_expiration_revocation

  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: contour
    hosts:
      - host: guardian.example.com
        paths:
          - path: /
            pathType: ImplementationSpecific
            backend:
              service:
                # name: backend_01
                port:
                  number: 80

  config:
    LOG_LEVEL: info
    AUTHENTICATED_USER_HEADER_KEY: x-authenticated-user-email
    NOTIFIER_PROVIDER: slack
    JOBS:
      FETCH_RESOURCES:
        ENABLE: false
        INTERVAL: "0 */2 * * *"
      REVOKE_EXPIRED_ACCESS:
        ENABLE: false
        INTERVAL: "*/20 * * * *"
      EXPIRING_ACCESS_NOTIFICATION:
        ENABLE: false
        INTERVAL: "0 9 * * *"


  secretConfig:
    ENCRYPTION_SECRET_KEY:
    NOTIFIER_ACCESS_TOKEN:
    DB_HOST: localhost
    DB_PORT:
    DB_NAME: guardian
    DB_USER: guardian
    DB_PASSWORD:
